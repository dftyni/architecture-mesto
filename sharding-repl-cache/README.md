# pymongo-api

## Как запустить

Запускаем mongodb и приложение

```shell
docker compose up -d
```

Заполняем mongodb данными

```shell
./scripts/mongo-init.sh
```

## Как проверить

### Проверка шардирования

У нас 2 набора реплик:
- shard1
	+ shard1-n1
	+ shard1-n2
	+ shard1-n3
- shard2
	+ shard2-n1
	+ shard2-n2
	+ shard2-n3
	
Было создано 5000 документов.

Осуществить проверку и вывести количество документов в каждом из шардов, количество реплик можно запустив скрипт:

```shell
./scripts/test.sh
```

### Проверка кеширования

Запустите несколько раз команду:
```shell
time curl http://localhost:8080/helloDoc/users
```
Второй и последующие вызовы эндпоинта /<collection_name>/users выполняются быстрее.

Мои результаты проверки
- первый запуск
	+ 0.025
- второй запуск
	+ 0.020
- третий запуск
	+ 0.014
- четвёртый запуск
	- 0.016