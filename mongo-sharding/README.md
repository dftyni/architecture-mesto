# Комментарии по обновленному compose.yaml:

## Шардирование

configsrv – конфигурационный сервер, который управляет метаданными о шардировании. Использует порт 27017.

shard1 и shard2 – два шардированных набора для распределения данных, настроенные на порты 27018 и 27019 соответственно.

mongos – маршрутизатор, работающий на порту 27020, через который будут проходить запросы к MongoDB. Настройки pymongo_api 
перенаправлены на этот порт.

pymongo_api – микросервис приложения, который теперь обращается к MongoDB через mongos для работы с шардами.